<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than diagrams.net -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1551px" height="1331px" viewBox="-0.5 -0.5 1551 1331" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2023-06-09T08:59:31.337Z&quot; agent=&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/15.7.3 Chrome/91.0.4472.164 Electron/13.6.1 Safari/537.36&quot; etag=&quot;0GcTHy9mBFFujzxv0jik&quot; version=&quot;15.7.3&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;C5RBs43oDa-KdzZeNtuy&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;"><defs/><g><path d="M 210 40 L 210 79.88" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 210 88.88 L 205.5 79.88 L 214.5 79.88 Z" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><rect x="150" y="0" width="120" height="40" rx="6" ry="6" fill="rgba(255, 255, 255, 1)" stroke="rgba(0, 0, 0, 1)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 20px; margin-left: 151px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">doCreateBean</div></div></div></foreignObject><text x="210" y="24" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">doCreateBean</text></switch></g><path d="M 260 130 L 303.63 130" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 308.88 130 L 301.88 133.5 L 303.63 130 L 301.88 126.5 Z" fill="rgba(0, 0, 0, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><path d="M 210 170 L 210 253.63" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 210 258.88 L 206.5 251.88 L 210 253.63 L 213.5 251.88 Z" fill="rgba(0, 0, 0, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><path d="M 210 90 L 260 130 L 210 170 L 160 130 Z" fill="rgba(255, 255, 255, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 90px; height: 1px; padding-top: 128px; margin-left: 165px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">mbd是否是单例</div></div></div></foreignObject><text x="210" y="132" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">mbd是否是单例</text></switch></g><path d="M 395 160 L 395 210 L 210 210 L 210 253.63" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 210 258.88 L 206.5 251.88 L 210 253.63 L 213.5 251.88 Z" fill="rgba(0, 0, 0, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><rect x="310" y="100" width="170" height="60" fill="rgba(255, 255, 255, 1)" stroke="rgba(0, 0, 0, 1)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 130px; margin-left: 311px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">从factoryBeanInstanceCache中获取该BeanWrapper</div></div></div></foreignObject><text x="395" y="134" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">从factoryBeanInstanceCache中获取该Bean...</text></switch></g><rect x="265" y="100" width="30" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 110px; margin-left: 280px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">yes</div></div></div></foreignObject><text x="280" y="114" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">yes</text></switch></g><rect x="205" y="200" width="30" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 210px; margin-left: 220px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">no</div></div></div></foreignObject><text x="220" y="214" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">no</text></switch></g><path d="M 210 340 L 210 423.63" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 210 428.88 L 206.5 421.88 L 210 423.63 L 213.5 421.88 Z" fill="rgba(0, 0, 0, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><path d="M 275 300 L 353.63 300" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 358.88 300 L 351.88 303.5 L 353.63 300 L 351.88 296.5 Z" fill="rgba(0, 0, 0, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><path d="M 210 260 L 275 300 L 210 340 L 145 300 Z" fill="rgba(255, 255, 255, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 300px; margin-left: 146px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">获取的BeanWrapper是否为空</div></div></div></foreignObject><text x="210" y="304" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">获取的BeanWrapper是否为空</text></switch></g><path d="M 210 490 L 210 553.63" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 210 558.88 L 206.5 551.88 L 210 553.63 L 213.5 551.88 Z" fill="rgba(0, 0, 0, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><rect x="0" y="430" width="420" height="60" fill="rgba(255, 255, 255, 1)" stroke="rgba(0, 0, 0, 1)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 418px; height: 1px; padding-top: 460px; margin-left: 1px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">合并bd<br />applyMergedBeanDefinitionPostProcessors(mbd, beanType, beanName)</div></div></div></foreignObject><text x="210" y="464" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">合并bd...</text></switch></g><path d="M 515 330 L 515 460 L 426.37 460" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 421.12 460 L 428.12 456.5 L 426.37 460 L 428.12 463.5 Z" fill="rgba(0, 0, 0, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><rect x="360" y="270" width="310" height="60" fill="rgba(255, 255, 255, 1)" stroke="rgba(0, 0, 0, 1)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 308px; height: 1px; padding-top: 300px; margin-left: 361px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">创建Bean的实例<br />createBeanInstance(beanName, mbd, args)</div></div></div></foreignObject><text x="515" y="304" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">创建Bean的实例...</text></switch></g><path d="M 395 620 L 593.63 620" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 598.88 620 L 591.88 623.5 L 593.63 620 L 591.88 616.5 Z" fill="rgba(0, 0, 0, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><path d="M 210 680 L 210 783.63" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 210 788.88 L 206.5 781.88 L 210 783.63 L 213.5 781.88 Z" fill="rgba(0, 0, 0, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><path d="M 210 560 L 395 620 L 210 680 L 25 620 Z" fill="rgba(255, 255, 255, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 368px; height: 1px; padding-top: 620px; margin-left: 26px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">是否提前暴露引用<br />单例并且bd允许循环依赖并且处理在创建中<br />(mbd.isSingleton() &amp;&amp; this.allowCircularReferences &amp;&amp; isSingletonCurrentlyInCreation(beanName))</div></div></div></foreignObject><text x="210" y="624" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">是否提前暴露引用单例并且bd允许循环依赖并且处理在创建中...</text></switch></g><path d="M 785 680 L 785 830 L 356.37 830" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 351.12 830 L 358.12 826.5 L 356.37 830 L 358.12 833.5 Z" fill="rgba(0, 0, 0, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><rect x="600" y="560" width="370" height="120" fill="rgba(255, 255, 255, 1)" stroke="rgba(0, 0, 0, 1)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 368px; height: 1px; padding-top: 620px; margin-left: 601px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">将实例化的引用暴露，添加至singletonFactories(二级缓存)中<br />addSingletonFactory(beanName, () -&gt; getEarlyBeanReference(beanName, mbd, bean))</div></div></div></foreignObject><text x="785" y="624" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">将实例化的引用暴露，添加至singletonFactories(二级缓存)中...</text></switch></g><path d="M 210 870 L 210 953.63" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 210 958.88 L 206.5 951.88 L 210 953.63 L 213.5 951.88 Z" fill="rgba(0, 0, 0, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><rect x="70" y="790" width="280" height="80" fill="rgba(255, 255, 255, 1)" stroke="rgba(0, 0, 0, 1)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 278px; height: 1px; padding-top: 830px; margin-left: 71px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">属性注入<br />populateBean(beanName, mbd, instanceWrapper)</div></div></div></foreignObject><text x="210" y="834" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">属性注入&#xa;populateBean(beanName, mbd, instanceWrapper)</text></switch></g><path d="M 210 1020 L 210 1083.63" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 210 1088.88 L 206.5 1081.88 L 210 1083.63 L 213.5 1081.88 Z" fill="rgba(0, 0, 0, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><rect x="70" y="960" width="280" height="60" fill="rgba(255, 255, 255, 1)" stroke="rgba(0, 0, 0, 1)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 278px; height: 1px; padding-top: 990px; margin-left: 71px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">初始化Bean<br />initializeBean(beanName, exposedObject, mbd)</div></div></div></foreignObject><text x="210" y="994" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">初始化Bean...</text></switch></g><path d="M 280 1130 L 353.63 1130" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 358.88 1130 L 351.88 1133.5 L 353.63 1130 L 351.88 1126.5 Z" fill="rgba(0, 0, 0, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><path d="M 210 1170 L 210 1263.63" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 210 1268.88 L 206.5 1261.88 L 210 1263.63 L 213.5 1261.88 Z" fill="rgba(0, 0, 0, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><path d="M 210 1090 L 280 1130 L 210 1170 L 140 1130 Z" fill="rgba(255, 255, 255, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 1130px; margin-left: 141px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">是否提前暴露</div></div></div></foreignObject><text x="210" y="1134" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">是否提前暴露</text></switch></g><rect x="270" y="1200" width="30" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1210px; margin-left: 285px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">否</div></div></div></foreignObject><text x="285" y="1214" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">否</text></switch></g><rect x="300" y="1100" width="30" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1110px; margin-left: 315px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">是</div></div></div></foreignObject><text x="315" y="1114" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">是</text></switch></g><rect x="360" y="1100" width="180" height="60" fill="rgba(255, 255, 255, 1)" stroke="rgba(0, 0, 0, 1)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 178px; height: 1px; padding-top: 1130px; margin-left: 361px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">getSingleton(beanName, false)</div></div></div></foreignObject><text x="450" y="1134" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">getSingleton(beanName, false)</text></switch></g><rect x="95" y="1270" width="230" height="60" fill="rgba(255, 255, 255, 1)" stroke="rgba(0, 0, 0, 1)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 1300px; margin-left: 96px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">注册bean 单例<br />registerDisposableBeanIfNecessary(beanName, bean, mbd)</div></div></div></foreignObject><text x="210" y="1304" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px" text-anchor="middle">注册bean 单例...</text></switch></g><path d="M 1020 520 L 1520 520 L 1550 550 L 1550 760 L 1020 760 L 1020 520 Z" fill="rgba(255, 255, 255, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><path d="M 1520 520 L 1520 550 L 1550 550 Z" fill-opacity="0.05" fill="#000000" stroke="none" pointer-events="all"/><path d="M 1520 520 L 1520 550 L 1550 550" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 528px; height: 1px; padding-top: 640px; margin-left: 1022px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div><br /></div><div><br /></div><div><br /></div><div>getEarlyBeanReference主要处理代理的时候，将代理的引用暴露出去。<br /></div><div><br /></div><div><div>protected void addSingletonFactory(String beanName, ObjectFactory&lt;?&gt; singletonFactory) {</div><div>   Assert.notNull(singletonFactory, "Singleton factory must not be null");</div><div>   synchronized (this.singletonObjects) {</div><div>       // 判断以及缓存中如果不存该beanName，则将其添加至三级缓存，并且移除二级缓存中的</div><div>      if (!this.singletonObjects.containsKey(beanName)) {</div><div>         this.singletonFactories.put(beanName, singletonFactory);</div><div>         this.earlySingletonObjects.remove(beanName);</div><div>         this.registeredSingletons.add(beanName);</div><div>      }</div><div>   }</div><div>}</div></div></div></div></div></foreignObject><text x="1022" y="644" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px">getEarlyBeanReference主要处理代理的时候，将代理的引用暴露出去。...</text></switch></g><path d="M 580 880 L 1010 880 L 1040 910 L 1040 1270 L 580 1270 L 580 880 Z" fill="rgba(255, 255, 255, 1)" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><path d="M 1010 880 L 1010 910 L 1040 910 Z" fill-opacity="0.05" fill="#000000" stroke="none" pointer-events="all"/><path d="M 1010 880 L 1010 910 L 1040 910" fill="none" stroke="rgba(0, 0, 0, 1)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 458px; height: 1px; padding-top: 1075px; margin-left: 582px;"><div data-drawio-colors="color: rgba(0, 0, 0, 1); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div>protected Object getSingleton(String beanName, boolean allowEarlyReference) {</div><div>    // 从一级缓存获取</div><div>   Object singletonObject = this.singletonObjects.get(beanName);</div><div>    // 一级缓存不存在并且该bean处于正在创建中</div><div>   if (singletonObject == null &amp;&amp; isSingletonCurrentlyInCreation(beanName)) {</div><div>      synchronized (this.singletonObjects) {</div><div>          // 从二级缓存中获取</div><div>         singletonObject = this.earlySingletonObjects.get(beanName);</div><div>          // 如果二级缓存也为空并且 允许获取提前暴露的应用(从三级缓存中获取，三级缓存的bean是半成品，处于刚实例化完成阶段)</div><div>         if (singletonObject == null &amp;&amp; allowEarlyReference) {</div><div>            ObjectFactory&lt;?&gt; singletonFactory = this.singletonFactories.get(beanName);</div><div>             // 三级缓存如果不为空，则使用，并且从三级缓存中移除，添加到二级缓存</div><div>            if (singletonFactory != null) {</div><div>               // 注入singletonFactory是一个函数是，是getEarlyBeanReference的返回值，这个是使用，才会去执行此方法</div><div>               // 获取创建的对象</div><div>               singletonObject = singletonFactory.getObject();</div><div>               this.earlySingletonObjects.put(beanName, singletonObject);</div><div>               this.singletonFactories.remove(beanName);</div><div>            }</div><div>         }</div><div>      }</div><div>   }</div><div>   return singletonObject;</div><div>}</div></div></div></div></foreignObject><text x="582" y="1079" fill="rgba(0, 0, 0, 1)" font-family="Helvetica" font-size="12px">protected Object getSingleton(String beanName, boolean allowEarlyReference)...</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>